<?xml version="1.0" encoding="UTF-8"?>
<!--<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplied DocBook XML V1.1//EN" "http://www.oasis-open.org/docbook/xml/simple/1.1/sdocbook.dtd"-->
<!--<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd"-->
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "../Common/docbook/xml/4.3/docbookx.dtd"
[
	<!ENTITY downloads SYSTEM "../Common/download.xml">
	<!ENTITY ServiceInstall SYSTEM "../ServiceInstall.xml">
	<!ENTITY ccnetconfig  SYSTEM "ccnetconfig.cdata">
	<!ENTITY ccregister SYSTEM "ccregister.cdata">
	<!ENTITY name "V1CCNetPublisher">
	]>
<article id="v1ccnetpublisher.user">
	<title>VersionOne CruiseControl Integration</title>
	<section id="description">
		<title>Description</title>
		<para>
			The VersionOne CruiseControl integration creates a record of CruiseControl builds in VersionOne, so the development teams can associate 
			stories and defects to a particular build. This visibility is useful when identifying problem builds or generating release notes.
		</para>
		<para>				
			Once the VersionOne Publisher has been installed, team members include a story or defect ID, such as “S-01454”, in the comments of their SCM 
			commit .  Every time a build executes the publisher creates a BuildRun asset in VersionOne with details of the build.  If the build comment contains
			story or defect IDs, the publisher will also create or reuse change-sets assets in VersionOne and assoicates the build with the appropriate 
			story or defect. 
		</para>
		<para>
			Using this integration you can better answer the following questions: 
			<itemizedlist>
				<para/>
				<listitem>
					<para>For Defects</para>
					<itemizedlist>
						<listitem>
							<para>Which build the defect was reported against?</para>
						</listitem>
						<listitem>
							<para>Which build contained the fix for the defect?</para>
						</listitem>
						<listitem>
							<para>Which build contains work for the defect?</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>For Stories (Backlog Item)</para>
					<itemizedlist>
						<listitem>
							<para>Which build contains work for the story?</para>
						</listitem>
						<listitem>
							<para>Which build contained the completed story?</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>For Build Runs</para>
					<itemizedlist>
						<listitem>
							<para>Which defects were fixed?</para>
						</listitem>
						<listitem>
							<para>Which stories were completed?</para>
						</listitem>
						<listitem>
							<para>Which defects were introduced?</para>
						</listitem>
						<listitem>
							<para>When work for a story or defect was included?</para>
						</listitem>
						<listitem>
							<para>Which Change-sets were included?</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>For a range of Build Runs</para>
					<itemizedlist>
						<listitem>
							<para>Which stories were completed?</para>
						</listitem>
						<listitem>
							<para>Which defects were fixed?</para>
						</listitem>
						<listitem>
							<para>Which defects were introduced?</para>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
		</para>
	</section>
	<section id="systemreqs">
		<title>System Requirements</title>
		<para>
			VersionOne: 8.1 or above 			
		</para>
		<para>
			Integration Server:
			<itemizedlist>
				<listitem>
					<para>Operating System—Windows 2000, 2003</para>
				</listitem>
			</itemizedlist>
		</para>
		<para>
			Continous Integration Server:
			<itemizedlist>
				<listitem>
					<para>Tested with CruiseControl Version 2.7.3</para>
				</listitem>
			</itemizedlist>
		</para>
	</section>

	&downloads;

	<section id="installation">
		<title>Installation</title>
		<para>
			These installation instructions assume that <ulink
				url="http://cruisecontrol.sourceforge.net/"
			>CruiseControl</ulink> is already installed, configured, and working properly. 
		</para>
		<section id="install.location">
			<title>1.  Ensure Connectivity</title>
			<para>Verify that you can connect to your VersionOne instance from the machine hosting CruiseControl</para>
		</section>
		<section id="install.extract">
			<title>2.  Extract Files</title>
			<para>Download VersionOne publisher using the link above and extract it into a folder of your choice.  This can be a temporary location since we will copy some of these files during CruiseControl configuration.</para>
		</section>
		<section id="install.configure">
			<title>3.  Configure</title>
			<para>Configuration for Build Integration is a 2 step process. </para>
			<orderedlist>
				<listitem>
					<para>
						<link linkend="configuration.v1">Configure VersionOne</link>
					</para>
				</listitem>
				<listitem>
					<para>
						<link linkend="configuration.cc">Configure CruiseControl</link>
					</para>
				</listitem>
			</orderedlist>
		</section>
		<section id="verify">
			<title>4. Verify the integration</title>
			<para>Once configuration is complete use the following steps to verify that the build integration is working</para>
			<orderedlist>
				<listitem>
					<para>Navigate to CruiseControl</para>
				</listitem>
				<listitem>
					<para>Force a build on the project you configured</para>
				</listitem>
				<listitem>
					<para>Wait for build to complete</para>
				</listitem>
				<listitem>
					<para>Navigate to VersionOne</para>
				</listitem>
				<listitem>
					<para>Login</para>
				</listitem>
				<listitem>
					<para>Select VersionOne project in 'My Projects' dropdown</para>
				</listitem>
				<listitem>
					<para>Navigate to the Reports | Reports Overview page</para>
				</listitem>
				<listitem>
					<para>Select the "Build Run Quicklist" Report </para>
				</listitem>
			</orderedlist>
			<para>You should an entry in the grid for the build you forced. If not, verify your configuration.</para>
		</section>
	</section>
	<section id="configuration">
		<title>Configuration</title>
		<section id="configuration.v1">
			<title>VersionOne Configuration</title>
			<orderedlist>
				<listitem>
					<para>Log into the VersionOne application as admin</para>
				</listitem>
				<listitem>
					<para>Navigate to the Admin | Configuration | System page.</para>
				</listitem>
				<listitem>
					<para>Check the “Enable Build Integration” checkbox and click the Apply button.</para>
					<figure>
						<title/>
						<graphic fileref="EnableBuildIntegration.jpg"/>
					</figure>
				</listitem>
				<listitem>
					<para>Navigate to the Admin | Projects | Build Project page</para>
					<figure>
						<title/>
						<graphic fileref="BuildProjects.jpg"/>
					</figure>
				</listitem>
				<listitem>
					<para>Click Add to add a new Build Project</para>
				</listitem>
				<listitem>
					<para>Specify the following</para>
					<orderedlist>
						<listitem>
							<para>Name – this is how the Build Project will be known to VersionOne users</para>
						</listitem>
						<listitem>
							<para>Reference – this is the Build Project is known to the partner system</para>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<para>Click Ok to save the new Build Project</para>
				</listitem>
				<listitem>
					<para>Navigate to the Admin | Projects | Projects page</para>
				</listitem>
				<listitem>
					<para>Click Edit on the row for the project you want associated with a Build Project</para>
				</listitem>
				<listitem>
					<para>Using the “Build Projects” dropdown add the appropriate Build Project.</para>
					<figure>
						<title/>
						<graphic fileref="AssignBuildProjectToProject.jpg"/>
					</figure>
				</listitem>
				<listitem>
					<para>Click Ok to accept the changes</para>
				</listitem>
				<listitem>
					<para>Logout</para>
				</listitem>
			</orderedlist>
		</section>
		<section id="configuration.cc">
			<title>CruiseControl Configuration</title>
			<para>This section describes how to configure CruiseControl for use with VersionOne</para>
			<orderedlist spacing="compact">
				<listitem>
					<para>
						Copy the following files from the downloaded package into the CruiseControl lib directory
						<itemizedlist>
							<listitem>
								<para>V1Publisher.jar</para>
							</listitem>
							<listitem>
								<para>VersionOne.APIClient.jar</para>
							</listitem>
							<listitem>
								<para>VersionOne.ObjectModel.jar</para>
							</listitem>
						</itemizedlist>   
					</para>
				</listitem>
				<listitem>
					<para>
						Register the VersionOne plugin by adding the following line to config.xml
						<programlisting>&ccregister;</programlisting>
						This registration can occur directly under the <code>&lt;cruisecontrol&gt;</code> element, or within the selected <code>&lt;project&gt;</code> element.
					</para>
				</listitem>
				<listitem>
					<para>Add the VersionOne publisher to the list of publishers for the select <code>&lt;project&gt;</code> elements in config.xml <programlisting>&ccnetconfig;</programlisting></para>
				</listitem>
				<listitem>
					<para>Use the following table to configure the VersionOne Publisher</para>
					<para>
						<table>
							<title/>
							<tgroup cols="5">
								<thead>
									<row>
										<entry>Node</entry>
										<entry>Description</entry>
										<entry>Type</entry>
										<entry>Required</entry>
										<entry>Default</entry>
									</row>
								</thead>
								<tbody>
									<row>
										<entry>url</entry>
										<entry>The URL of the VersionOne Application. For example: http://server/VersionOne/</entry>
										<entry>String</entry>
										<entry>True</entry>
										<entry/>
									</row>
									<row>
										<entry>username</entry>
										<entry>The username to authenticate with. This field is optional if using NT Auth (integrated auth). Required when using VersionOne authentication.</entry>
										<entry>String</entry>
										<entry>(varies)</entry>
										<entry/>
									</row>
									<row>
										<entry>password</entry>
										<entry>The password to authenticate with. This field is optional if using NT Auth (integrated auth). Required when using VersionOne authentication.</entry>
										<entry>String</entry>
										<entry>(varies)</entry>
										<entry/>
									</row>
									<row>
										<entry>integratedauth</entry>
										<entry>True to use NT Auth (integrated auth), false to use VersionOne authentication.</entry>
										<entry>Boolean</entry>
										<entry>(varies)</entry>
										<entry>false</entry>
									</row>
									<row>
										<entry>webroot</entry>
										<entry>The root of the URL used for linking to build logs. For example: http://localhost/ccnet/</entry>
										<entry>String</entry>
										<entry>False</entry>
										<entry>Null</entry>
									</row>
									<row>
										<entry>server</entry>
										<entry>The "BuildServer" portion of the URL used for linking to build logs. For example: http://localhost/ccnet/server/{BuildServer}/project/...</entry>
										<entry>String</entry>
										<entry>False</entry>
										<entry>"local"</entry>
									</row>
									<row>
										<entry>referenceexpression</entry>
										<entry>The regular expression to use when matching primary workitems (stories and defects) with change comments. Required when using changeset integration.</entry>
										<entry>String</entry>
										<entry>(varies)</entry>
										<entry>Null</entry>
									</row>
									<row>
										<entry>referencefield</entry>
										<entry>The system name of an attribute to search when matching primary workitems (stories and defects) with change comments. Required when using changeset integration.</entry>
										<entry>String</entry>
										<entry>(varies)</entry>
										<entry>Nulll</entry>
									</row>
								</tbody>
							</tgroup>
						</table>
					</para>
				</listitem>
			</orderedlist>
			<para>Here's an explanation of the VersionOne publisher illustrated above:
				<table>
					<title/>
					<tgroup cols="2">
						<tbody>
							<row>
								<entry>The VersionOne URL is</entry>
								<entry>http://V1Host/VersionOne/</entry>
							</row>
							<row>
								<entry>The CruiseControl URL is</entry>
								<entry>http://CCHost/ccnet</entry>
							</row>
							<row>
								<entry>The publisher will login into VersionOne as</entry>
								<entry>admin</entry>
							</row>
							<row>
								<entry>When searching CruiseControl comments to determine if it contains a VersionOne Workitem, the publisher will use the regular expression</entry>
								<entry>"[A-Z]{1,2}-[0-9]+”</entry>
							</row>
							<row>
								<entry>If a Workitem identifier is found, the publisher will attempt to match this information to the VersionOne Workitem attribute</entry>
								<entry>Number</entry>
							</row>
						</tbody>
					</tgroup>

				</table>
			</para>
		</section>
	</section>
	<section id="section.footer">
		<title/>
		<para>Copyright &copy; <?dbtimestamp format="Y"?>, VersionOne, Inc. All rights reserved. This document was generated <?dbtimestamp format="Y-m-d H:M:S"?>.</para>
	</section>
</article>
